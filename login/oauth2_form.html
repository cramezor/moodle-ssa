
<?php 
//get previous auth provider
$allauthproviders = optional_param('allauthproviders', false, PARAM_BOOL);
$cookiename = 'MOODLEGOOGLEOAUTH2_'.$CFG->sessioncookie;
if (empty($_COOKIE[$cookiename])) {
    $authprovider = '';
} else {
    $authprovider = $_COOKIE[$cookiename];
}
?>
<div class="loginbox clearfix onecolumn">
  <div class="loginpanel">
    <center> 
    <p>SSA-VLE uses your Sidney Stringer Academy Google Apps account to log in.</p>
    <br/>
    <div style="width:'1%'">
      <?php
        $displayprovider = ((empty($authprovider) || $authprovider == 'google' || $allauthproviders) && get_config('auth/googleoauth2', 'googleclientid'));
        $providerdisplaystyle = $displayprovider?'display:inline-block;':'display:none;';
      ?>
      <div class="signinprovider" style="<?php echo $providerdisplaystyle; ?>">
        <a href="https://accounts.google.com/o/oauth2/auth?hd=students.sidneystringeracademy.org.uk&client_id=<?php echo get_config('auth/googleoauth2', 'googleclientid'); ?>&redirect_uri=<?php echo $CFG->wwwroot; ?>/auth/googleoauth2/google_redirect.php&scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email&response_type=code" class="login google g-button g-button-submit">Student</a>
      </div>
      <div class="signinprovider" style="<?php echo $providerdisplaystyle; ?>">
        <a href="https://accounts.google.com/o/oauth2/auth?hd=sidneystringeracademy.org.uk&client_id=<?php echo get_config('auth/googleoauth2', 'googleclientid'); ?>&redirect_uri=<?php echo $CFG->wwwroot; ?>/auth/googleoauth2/google_redirect.php&scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email&response_type=code" class="login google g-button g-button-submit">Staff</a>
      </div>
    </div>
    </center>
  </div> <!-- Login Panel -->
</div>
